<!DOCTYPE html><html dir="ltr" lang="en" class="scroll-smooth" data-astro-cid-sckkx6r4> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="canonical" href="https://murtuzarahman.com/posts/android/android-garbage-collector-app-lag/"><meta name="generator" content="Astro v5.11.0"><!-- General Meta Tags --><title>Why Android Apps Lag: Understanding Garbage Collection and Main Thread Performance | Murtuza&#39;s Paper</title><meta name="title" content="Why Android Apps Lag: Understanding Garbage Collection and Main Thread Performance | Murtuza's Paper"><meta name="description" content="Learn how Android's garbage collector and main thread management impact app performance, why apps lag, and how to optimize our code for smooth UI experiences."><meta name="author" content="Jalilur Rahman Murtuza"><link rel="sitemap" href="/sitemap-index.xml"><!-- Open Graph / Facebook --><meta property="og:title" content="Why Android Apps Lag: Understanding Garbage Collection and Main Thread Performance | Murtuza's Paper"><meta property="og:description" content="Learn how Android's garbage collector and main thread management impact app performance, why apps lag, and how to optimize our code for smooth UI experiences."><meta property="og:url" content="https://murtuzarahman.com/posts/android/android-garbage-collector-app-lag/"><meta property="og:image" content="https://murtuzarahman.com/posts/android/android-garbage-collector-app-lag/index.png"><!-- Article Published/Modified time --><meta property="article:published_time" content="2025-07-27T10:44:00.000Z"><meta property="article:modified_time" content="2025-07-27T10:44:00.000Z"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://murtuzarahman.com/posts/android/android-garbage-collector-app-lag/"><meta property="twitter:title" content="Why Android Apps Lag: Understanding Garbage Collection and Main Thread Performance | Murtuza's Paper"><meta property="twitter:description" content="Learn how Android's garbage collector and main thread management impact app performance, why apps lag, and how to optimize our code for smooth UI experiences."><meta property="twitter:image" content="https://murtuzarahman.com/posts/android/android-garbage-collector-app-lag/index.png"><!-- Google JSON-LD Structured data --><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","headline":"Why Android Apps Lag: Understanding Garbage Collection and Main Thread Performance | Murtuza's Paper","image":"https://murtuzarahman.com/posts/android/android-garbage-collector-app-lag/index.png","datePublished":"2025-07-27T10:44:00.000Z","dateModified":"2025-07-27T10:44:00.000Z","author":[{"@type":"Person","name":"Jalilur Rahman Murtuza"}]}</script><!-- Enable RSS feed auto-discovery  --><!-- https://docs.astro.build/en/recipes/rss/#enabling-rss-feed-auto-discovery --><link rel="alternate" type="application/rss+xml" title="Murtuza's Paper" href="https://murtuzarahman.com/rss.xml"><meta name="theme-color" content=""><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script type="module" src="/_astro/ClientRouter.astro_astro_type_script_index_0_lang.CtSceO8m.js"></script><script src="/toggle-theme.js"></script><link rel="stylesheet" href="/_astro/about.DX-dGlB1.css">
<style>@keyframes astroFadeInOut{0%{opacity:1}to{opacity:0}}@keyframes astroFadeIn{0%{opacity:0;mix-blend-mode:plus-lighter}to{opacity:1;mix-blend-mode:plus-lighter}}@keyframes astroFadeOut{0%{opacity:1;mix-blend-mode:plus-lighter}to{opacity:0;mix-blend-mode:plus-lighter}}@keyframes astroSlideFromRight{0%{transform:translate(100%)}}@keyframes astroSlideFromLeft{0%{transform:translate(-100%)}}@keyframes astroSlideToRight{to{transform:translate(100%)}}@keyframes astroSlideToLeft{to{transform:translate(-100%)}}@media (prefers-reduced-motion){::view-transition-group(*),::view-transition-old(*),::view-transition-new(*){animation:none!important}[data-astro-transition-scope]{animation:none!important}}
:where([data-astro-image]){object-fit:var(--fit);object-position:var(--pos);height:auto}:where([data-astro-image=full-width]){width:100%}:where([data-astro-image=constrained]){max-width:100%}
</style><style>[data-astro-transition-scope="astro-2a25gcio-1"] { view-transition-name: why-android-apps-lag-understanding-garbage-collection-and-main-thread-performance; }@layer astro { ::view-transition-old(why-android-apps-lag-understanding-garbage-collection-and-main-thread-performance) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(why-android-apps-lag-understanding-garbage-collection-and-main-thread-performance) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(why-android-apps-lag-understanding-garbage-collection-and-main-thread-performance) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(why-android-apps-lag-understanding-garbage-collection-and-main-thread-performance) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-2a25gcio-1"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-2a25gcio-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-2a25gcio-1"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-2a25gcio-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-2a25gcio-1"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-2a25gcio-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-2a25gcio-1"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-2a25gcio-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style><style>[data-astro-transition-scope="astro-36ssibgs-2"] { view-transition-name: android; }@layer astro { ::view-transition-old(android) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(android) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(android) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(android) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-36ssibgs-2"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-36ssibgs-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-36ssibgs-2"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-36ssibgs-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-36ssibgs-2"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-36ssibgs-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-36ssibgs-2"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-36ssibgs-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style><style>[data-astro-transition-scope="astro-36ssibgs-3"] { view-transition-name: garbage-collection; }@layer astro { ::view-transition-old(garbage-collection) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(garbage-collection) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(garbage-collection) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(garbage-collection) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-36ssibgs-3"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-36ssibgs-3"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-36ssibgs-3"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-36ssibgs-3"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-36ssibgs-3"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-36ssibgs-3"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-36ssibgs-3"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-36ssibgs-3"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style><style>[data-astro-transition-scope="astro-36ssibgs-4"] { view-transition-name: app-lag; }@layer astro { ::view-transition-old(app-lag) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(app-lag) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(app-lag) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(app-lag) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-36ssibgs-4"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-36ssibgs-4"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-36ssibgs-4"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-36ssibgs-4"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-36ssibgs-4"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-36ssibgs-4"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-36ssibgs-4"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-36ssibgs-4"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style><style>[data-astro-transition-scope="astro-36ssibgs-5"] { view-transition-name: memory-management; }@layer astro { ::view-transition-old(memory-management) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(memory-management) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(memory-management) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(memory-management) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-36ssibgs-5"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-36ssibgs-5"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-36ssibgs-5"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-36ssibgs-5"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-36ssibgs-5"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-36ssibgs-5"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-36ssibgs-5"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-36ssibgs-5"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style></head> <body data-astro-cid-sckkx6r4>  <header> <a id="skip-to-content" href="#main-content" class="absolute start-16 -top-full z-50 bg-background px-3 py-2 text-accent backdrop-blur-lg transition-all focus:top-4">
Skip to content
</a> <div id="nav-container" class="mx-auto flex max-w-app flex-col items-center justify-between sm:flex-row"> <div id="top-nav-wrap" class="relative flex w-full items-baseline justify-between bg-background p-4 sm:items-center sm:py-6"> <a href="/" class="absolute py-1 text-xl leading-8 font-semibold whitespace-nowrap sm:static sm:my-auto sm:text-2xl sm:leading-none"> Murtuza&#39;s Paper </a> <nav id="nav-menu" class="flex w-full flex-col items-center sm:ms-2 sm:flex-row sm:justify-end sm:space-x-4 sm:py-0"> <button id="menu-btn" class="focus-outline self-end p-2 sm:hidden" aria-label="Open Menu" aria-expanded="false" aria-controls="menu-items"> <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="hidden" id="close-icon"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M18 6l-12 12" /><path d="M6 6l12 12" /></svg> <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-menu-deep" id="menu-icon"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M4 6h16" /><path d="M7 12h13" /><path d="M10 18h10" /></svg> </button> <ul id="menu-items" class="mt-4 grid w-44 grid-cols-2 place-content-center gap-2 [&#38;>li>a]:block [&#38;>li>a]:px-4 [&#38;>li>a]:py-3 [&#38;>li>a]:text-center [&#38;>li>a]:font-medium [&#38;>li>a]:hover:text-accent sm:[&#38;>li>a]:px-2 sm:[&#38;>li>a]:py-1 hidden sm:mt-0 sm:flex sm:w-auto sm:gap-x-5 sm:gap-y-0"> <li class="col-span-2"> <a href="/posts" class="active-nav">
Posts
</a> </li> <li class="col-span-2"> <a href="/tags">
Tags
</a> </li> <li class="col-span-2"> <a href="/about">
About
</a> </li> <li class="col-span-2"> <a href="/archives" class="group inline-block hover:text-accent focus-outline flex justify-center p-3 sm:p-1" aria-label="archives" title="Archives"> <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="hidden sm:inline-block"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M3 4m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z" /><path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" /><path d="M10 12l4 0" /></svg> <span class="sm:sr-only">Archives</span> </a> </li> <li class="col-span-1 flex items-center justify-center"> <a href="/search" class="group inline-block hover:text-accent focus-outline flex p-3 sm:p-1" aria-label="search" title="Search"> <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-search"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" /><path d="M21 21l-6 -6" /></svg> <span class="sr-only">Search</span> </a> </li> <li class="col-span-1 flex items-center justify-center"> <button id="theme-btn" class="focus-outline relative size-12 p-4 sm:size-8 hover:[&>svg]:stroke-accent" title="Toggles light & dark" aria-label="auto" aria-live="polite"> <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="absolute top-[50%] left-[50%] -translate-[50%] scale-100 rotate-0 transition-all dark:scale-0 dark:-rotate-90"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" /></svg> <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="absolute top-[50%] left-[50%] -translate-[50%] scale-0 rotate-90 transition-all dark:scale-100 dark:rotate-0"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M14.828 14.828a4 4 0 1 0 -5.656 -5.656a4 4 0 0 0 5.656 5.656z" /><path d="M6.343 17.657l-1.414 1.414" /><path d="M6.343 6.343l-1.414 -1.414" /><path d="M17.657 6.343l1.414 -1.414" /><path d="M17.657 17.657l1.414 1.414" /><path d="M4 12h-2" /><path d="M12 4v-2" /><path d="M20 12h2" /><path d="M12 20v2" /></svg> </button> </li> </ul> </nav> </div> </div> <div class="mx-auto max-w-app px-4"> <hr class="border-border" aria-hidden="true"> </div> </header> <script type="module">function s(){const e=document.querySelector("#menu-btn"),t=document.querySelector("#menu-items"),n=document.querySelector("#menu-icon"),o=document.querySelector("#close-icon");!e||!t||!n||!o||e.addEventListener("click",()=>{const c=e.getAttribute("aria-expanded")==="true";e.setAttribute("aria-expanded",c?"false":"true"),e.setAttribute("aria-label",c?"Open Menu":"Close Menu"),t.classList.toggle("hidden"),n.classList.toggle("hidden"),o.classList.toggle("hidden")})}s();document.addEventListener("astro:after-swap",s);</script> <div class="mx-auto flex w-full max-w-app items-center justify-start px-2"><a id="back-button" href="/" class="group inline-block hover:text-accent focus-outline mt-8 mb-2 flex hover:text-foreground/75"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 rtl:rotate-180"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M15 6l-6 6l6 6" /></svg><span>Go back</span></a></div><script type="module">function o(){const t=document.querySelector("#back-button"),e=sessionStorage.getItem("backUrl");e&&t&&(t.href=e)}document.addEventListener("astro:page-load",o);o();</script> <main id="main-content" class="mx-auto w-full max-w-app px-4 pb-12" data-pagefind-body style> <!-- Your existing main content --> <h1 class="inline-block text-2xl font-bold text-accent sm:text-3xl" data-astro-transition-scope="astro-2a25gcio-1"> Why Android Apps Lag: Understanding Garbage Collection and Main Thread Performance </h1> <div class="my-2 flex items-center gap-2"> <div class="flex items-center gap-x-2 opacity-80"> <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 min-w-[1.375rem]"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12z" /><path d="M16 3v4" /><path d="M8 3v4" /><path d="M4 11h16" /><path d="M7 14h.013" /><path d="M10.01 14h.005" /><path d="M13.01 14h.005" /><path d="M16.015 14h.005" /><path d="M13.015 17h.005" /><path d="M7.01 17h.005" /><path d="M10.01 17h.005" /></svg>  <time class="text-sm sm:text-base" datetime="2025-07-27T10:44:00.000Z">27 Jul, 2025</time> </div> <span aria-hidden="true" class="max-sm:hidden">|</span>  </div> <article id="article" class="app-prose mx-auto mt-8 max-w-app prose-pre:bg-(--shiki-light-bg) dark:prose-pre:bg-(--shiki-dark-bg)"> <p>Efficient memory management is crucial for building smooth and responsive Android applications. One of the key players in this process is the <strong>Garbage Collector (GC)</strong>. But how does GC work, and why can it sometimes cause our app to lag? Let’s break it down with simple examples and diagrams.</p>
<hr>
<h2 id="memory-allocation-example">Memory Allocation Example</h2>
<p>Imagine our app has a total memory limit of <strong>50MB</strong>. We can visualize this as a grid with <strong>10 columns and 5 rows</strong>, where each cell represents <strong>1MB</strong>.</p>
<h2 id="diagram-1-initial-memory-allocation">Diagram 1: Initial Memory Allocation</h2>
<!-- ```plaintext
+---+---+---+---+---+---+---+---+---+---+
| 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 |
+---+---+---+---+---+---+---+---+---+---+
| 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 |
+---+---+---+---+---+---+---+---+---+---+
| 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 |
+---+---+---+---+---+---+---+---+---+---+
| 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 |
+---+---+---+---+---+---+---+---+---+---+
| 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 |
+---+---+---+---+---+---+---+---+---+---+
Total: 50MB
``` -->

  <table>
  <tbody><tr>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
  </tr>
  <tr>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
  </tr>
  <tr>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
  </tr>
  <tr>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
  </tr>
  <tr>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
  </tr></tbody></table>
Total: 50MB
<hr>
<p>Suppose we launch our application and it takes <strong>5MB</strong>. Then, we open <strong>Activity 1 (10MB) and Activity 2 (10MB)</strong>:</p>
<pre class="astro-code astro-code-themes min-light night-owl" style="--shiki-light:#24292eff;--shiki-dark:#d6deeb;--shiki-light-bg:#ffffff;--shiki-dark-bg:#011627; overflow-x: auto;--file-name-offset: -0.75rem;" tabindex="0" data-language="plaintext"><code><span class="line"><span>Application (5MB) + Activity 1 (10MB) + Activity 2 (10MB) = 25MB</span></span></code></pre>
<hr>
<h2 id="killing-activities-and-memory-usage">Killing Activities and Memory Usage</h2>
<p>Now, let’s say we kill <strong>Activity 1</strong> and <strong>Activity 2</strong> and open <strong>Activity 3</strong> (10MB):</p>
<pre class="astro-code astro-code-themes min-light night-owl" style="--shiki-light:#24292eff;--shiki-dark:#d6deeb;--shiki-light-bg:#ffffff;--shiki-dark-bg:#011627; overflow-x: auto;--file-name-offset: -0.75rem;" tabindex="0" data-language="plaintext"><code><span class="line"><span>Application (5MB) + Activity 3 (10MB) = 15MB</span></span></code></pre>
<p>But, the memory used by Activity 1 and Activity 2 (20MB) is still <strong>not immediately freed</strong>. This is where the <strong>Garbage Collector</strong> comes in.</p>
<h2 id="diagram-2-memory-after-killing-activities">Diagram 2: Memory After Killing Activities</h2>
<!-- ```plaintext
+---+---+---+---+---+---+---+---+---+---+
| A | A | A | A | A | 1 | 1 | 1 | 1 | 1 |
+---+---+---+---+---+---+---+---+---+---+
| 1 | 1 | 1 | 1 | 1 | 2 | 2 | 2 | 2 | 2 |
+---+---+---+---+---+---+---+---+---+---+
| 2 | 2 | 2 | 2 | 2 | 3 | 3 | 3 | 3 | 3 |
+---+---+---+---+---+---+---+---+---+---+
| 3 | 3 | 3 | 3 | 3 |   |   |   |   |   |
+---+---+---+---+---+---+---+---+---+---+
|   |   |   |   |   |   |   |   |   |   |
+---+---+---+---+---+---+---+---+---+---+
A = App, 1 = Activity 1, 2 = Activity 2, 3 = Activity 3
``` -->
<table>
  <tbody><tr>
    <td style="background:#2196F3;color:white;">A</td>
    <td style="background:#2196F3;color:white;">A</td>
    <td style="background:#2196F3;color:white;">A</td>
    <td style="background:#2196F3;color:white;">A</td>
    <td style="background:#2196F3;color:white;">A</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
  </tr>
  <tr>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#4CAF50;color:white;">1</td>
    <td style="background:#FFEB3B;color:black;">2</td>
    <td style="background:#FFEB3B;color:black;">2</td>
    <td style="background:#FFEB3B;color:black;">2</td>
    <td style="background:#FFEB3B;color:black;">2</td>
    <td style="background:#FFEB3B;color:black;">2</td>
  </tr>
  <tr>
    <td style="background:#FFEB3B;color:black;">2</td>
    <td style="background:#FFEB3B;color:black;">2</td>
    <td style="background:#FFEB3B;color:black;">2</td>
    <td style="background:#FFEB3B;color:black;">2</td>
    <td style="background:#FFEB3B;color:black;">2</td>
    <td style="background:#FF9800;color:white;">3</td>
    <td style="background:#FF9800;color:white;">3</td>
    <td style="background:#FF9800;color:white;">3</td>
    <td style="background:#FF9800;color:white;">3</td>
    <td style="background:#FF9800;color:white;">3</td>
  </tr>
  <tr>
    <td style="background:#FF9800;color:white;">3</td>
    <td style="background:#FF9800;color:white;">3</td>
    <td style="background:#FF9800;color:white;">3</td>
    <td style="background:#FF9800;color:white;">3</td>
    <td style="background:#FF9800;color:white;">3</td>
    <td style="background:#000000;color:green;">-</td>
    <td style="background:#000000;color:green;">-</td>
    <td style="background:#000000;color:green;">-</td>
    <td style="background:#000000;color:green;">-</td>
    <td style="background:#000000;color:green;">-</td>
  </tr>
  <tr>
    <td style="background:#000000;color:green;">-</td>
    <td style="background:#000000;color:green;">-</td>
    <td style="background:#000000;color:green;">-</td>
    <td style="background:#000000;color:green;">-</td>
    <td style="background:#000000;color:green;">-</td>
    <td style="background:#000000;color:green;">-</td>
    <td style="background:#000000;color:green;">-</td>
    <td style="background:#000000;color:green;">-</td>
    <td style="background:#000000;color:green;">-</td>
    <td style="background:#000000;color:green;">-</td>
  </tr>
</tbody></table>
<p>
A = App, 1 = Activity 1, 2 = Activity 2, 3 = Activity 3
</p>
<hr>
<h2 id="how-garbage-collector-gc-works">How Garbage Collector (GC) Works</h2>
<p>The <strong>GC</strong> periodically checks memory blocks to see if they are still in use. If not, it frees them up. In our example, the 20MB used by the killed activities is now unnecessary, so GC should remove it.</p>
<h2 id="diagram-3-after-gc-cleans-up">Diagram 3: After GC Cleans Up</h2>
<!-- ```plaintext
+---+---+---+---+---+---+---+---+---+---+
| A | A | A | A | A |   |   |   |   |   |
+---+---+---+---+---+---+---+---+---+---+
|   |   |   |   |   | 3 | 3 | 3 | 3 | 3 |
+---+---+---+---+---+---+---+---+---+---+
| 3 | 3 | 3 | 3 | 3 |   |   |   |   |   |
+---+---+---+---+---+---+---+---+---+---+
|   |   |   |   |   |   |   |   |   |   |
+---+---+---+---+---+---+---+---+---+---+
|   |   |   |   |   |   |   |   |   |   |
+---+---+---+---+---+---+---+---+---+---+
Unused memory blocks are collected by GC.
``` -->
<table>
  <tbody><tr>
    <td style="background:#2196F3;color:white;">A</td>
    <td style="background:#2196F3;color:white;">A</td>
    <td style="background:#2196F3;color:white;">A</td>
    <td style="background:#2196F3;color:white;">A</td>
    <td style="background:#2196F3;color:white;">A</td>
    <td style="background:#000000;color:green;">-</td>
    <td style="background:#000000;color:green;">-</td>
    <td style="background:#000000;color:green;">-</td>
    <td style="background:#000000;color:green;">-</td>
    <td style="background:#000000;color:green;">-</td>
  </tr>
  <tr>
    <td style="background:#000000;color:green;">-</td>
    <td style="background:#000000;color:green;">-</td>
    <td style="background:#000000;color:green;">-</td>
    <td style="background:#000000;color:green;">-</td>
    <td style="background:#000000;color:green;">-</td>
    <td style="background:#FF9800;color:white;">3</td>
    <td style="background:#FF9800;color:white;">3</td>
    <td style="background:#FF9800;color:white;">3</td>
    <td style="background:#FF9800;color:white;">3</td>
    <td style="background:#FF9800;color:white;">3</td>
  </tr>
  <tr>
    <td style="background:#FF9800;color:white;">3</td>
    <td style="background:#FF9800;color:white;">3</td>
    <td style="background:#FF9800;color:white;">3</td>
    <td style="background:#FF9800;color:white;">3</td>
    <td style="background:#FF9800;color:white;">3</td>
    <td style="background:#000000;color:green;">-</td>
    <td style="background:#000000;color:green;">-</td>
    <td style="background:#000000;color:green;">-</td>
    <td style="background:#000000;color:green;">-</td>
    <td style="background:#000000;color:green;">-</td>
  </tr>
  <tr>
    <td style="background:#000000;color:green;">-</td>
    <td style="background:#000000;color:green;">-</td>
    <td style="background:#000000;color:green;">-</td>
    <td style="background:#000000;color:green;">-</td>
    <td style="background:#000000;color:green;">-</td>
    <td style="background:#000000;color:green;">-</td>
    <td style="background:#000000;color:green;">-</td>
    <td style="background:#000000;color:green;">-</td>
    <td style="background:#000000;color:green;">-</td>
    <td style="background:#000000;color:green;">-</td>
  </tr>
  <tr>
    <td style="background:#000000;color:green;">-</td>
    <td style="background:#000000;color:green;">-</td>
    <td style="background:#000000;color:green;">-</td>
    <td style="background:#000000;color:green;">-</td>
    <td style="background:#000000;color:green;">-</td>
    <td style="background:#000000;color:green;">-</td>
    <td style="background:#000000;color:green;">-</td>
    <td style="background:#000000;color:green;">-</td>
    <td style="background:#000000;color:green;">-</td>
    <td style="background:#000000;color:green;">-</td>
  </tr>
</tbody></table>
Unused memory blocks are collected by GC.
<hr>
<h2 id="why-does-an-android-app-lag">Why Does an Android App Lag?</h2>
<p>Android apps are expected to <strong>refresh the UI every 16ms</strong> (to achieve 60 frames per second). The <strong>main thread</strong> (UI thread) is responsible for drawing the UI and handling user interactions.</p>
<p>If a task (like <strong>onCreate()</strong> or GC) takes too long (say, 26ms), the main thread is blocked, and the UI cannot update in time. This causes <strong>dropped frames</strong> and visible lag.</p>
<h2 id="diagram-4-frame-timing-and-dropped-frames">Diagram 4: Frame Timing and Dropped Frames</h2>
<pre class="astro-code astro-code-themes min-light night-owl" style="--shiki-light:#24292eff;--shiki-dark:#d6deeb;--shiki-light-bg:#ffffff;--shiki-dark-bg:#011627; overflow-x: auto;--file-name-offset: -0.75rem;" tabindex="0" data-language="plaintext"><code><span class="line"><span>Time:  |----16ms----|----16ms----|----16ms----|----16ms----|</span></span>
<span class="line"><span>Draw:  |   Draw     |   Draw     |   Draw     |   Draw     |</span></span>
<span class="line"><span></span></span>
<span class="line"><span>If a task takes 26ms:</span></span>
<span class="line"><span>Time:  |----16ms----|------26ms------|----16ms----|</span></span>
<span class="line"><span>Draw:  |   Draw     |  Dropped Frame |   Draw     |</span></span></code></pre>
<hr>
<h2 id="main-reasons-for-app-lag">Main Reasons for App Lag</h2>
<ol>
<li>
<p><strong>Frequent GC Runs:</strong><br>
When our app uses a lot of memory, GC runs more often, sometimes on the main thread, causing UI freezes.</p>
</li>
<li>
<p><strong>Heavy Work on Main Thread:</strong><br>
Long-running tasks (like network calls or heavy computations) block the main thread, delaying UI updates.</p>
</li>
</ol>
<h2 id="how-to-avoid-lag">How to Avoid Lag</h2>
<ul>
<li><strong>Move heavy tasks to background threads</strong>  using  <code>AsyncTask</code>,  <code>Handler</code>,  <code>ExecutorService</code>, or Kotlin coroutines.</li>
<li><strong>Optimize memory usage</strong>  to reduce GC frequency.</li>
<li><strong>Profile our app</strong>  to find and fix memory leaks.</li>
</ul> </article> <hr class="my-8 border-dashed">  <ul class="mt-4 mb-8 sm:my-8"> <li class="group inline-block group-hover:cursor-pointer my-1 underline-offset-4"> <a href="/tags/android/" class="relative pe-2 text-lg underline decoration-dashed group-hover:-top-0.5 group-hover:text-accent focus-visible:p-1 focus-visible:no-underline text-sm" data-astro-transition-scope="astro-36ssibgs-2"> <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block opacity-80 -me-3.5 size-4"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M5 9l14 0" /><path d="M5 15l14 0" /><path d="M11 4l-4 16" /><path d="M17 4l-4 16" /></svg>
&nbsp;<span>Android</span> </a> </li><li class="group inline-block group-hover:cursor-pointer my-1 underline-offset-4"> <a href="/tags/garbage-collection/" class="relative pe-2 text-lg underline decoration-dashed group-hover:-top-0.5 group-hover:text-accent focus-visible:p-1 focus-visible:no-underline text-sm" data-astro-transition-scope="astro-36ssibgs-3"> <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block opacity-80 -me-3.5 size-4"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M5 9l14 0" /><path d="M5 15l14 0" /><path d="M11 4l-4 16" /><path d="M17 4l-4 16" /></svg>
&nbsp;<span>Garbage Collection</span> </a> </li><li class="group inline-block group-hover:cursor-pointer my-1 underline-offset-4"> <a href="/tags/app-lag/" class="relative pe-2 text-lg underline decoration-dashed group-hover:-top-0.5 group-hover:text-accent focus-visible:p-1 focus-visible:no-underline text-sm" data-astro-transition-scope="astro-36ssibgs-4"> <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block opacity-80 -me-3.5 size-4"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M5 9l14 0" /><path d="M5 15l14 0" /><path d="M11 4l-4 16" /><path d="M17 4l-4 16" /></svg>
&nbsp;<span>App Lag</span> </a> </li><li class="group inline-block group-hover:cursor-pointer my-1 underline-offset-4"> <a href="/tags/memory-management/" class="relative pe-2 text-lg underline decoration-dashed group-hover:-top-0.5 group-hover:text-accent focus-visible:p-1 focus-visible:no-underline text-sm" data-astro-transition-scope="astro-36ssibgs-5"> <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block opacity-80 -me-3.5 size-4"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M5 9l14 0" /><path d="M5 15l14 0" /><path d="M11 4l-4 16" /><path d="M17 4l-4 16" /></svg>
&nbsp;<span>Memory Management</span> </a> </li> </ul> <div id="btt-btn-container" class="fixed end-4 bottom-8 z-50 md:sticky md:end-auto md:float-end md:me-1 translate-y-14 opacity-0 transition duration-500"> <button data-button="back-to-top" class="group relative bg-background px-2 py-1 size-14 rounded-full shadow-xl md:h-8 md:w-fit md:rounded-md md:shadow-none md:focus-visible:rounded-none md:bg-background/35 md:bg-clip-padding md:backdrop-blur-lg"> <span id="progress-indicator" class="absolute inset-0 -z-10 block size-14 scale-110 rounded-full bg-transparent md:hidden md:h-8 md:rounded-md"></span> <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block rotate-90 md:hidden"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M15 6l-6 6l6 6" /></svg> <span class="sr-only text-sm group-hover:text-accent md:not-sr-only"> <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-4"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M12 5l0 14" /><path d="M16 9l-4 -4" /><path d="M8 9l4 -4" /></svg>
Back To Top
</span> </button> </div> <script data-astro-rerun>
  /** Scrolls the document to the top when
   * the "Back to Top" button is clicked. */
  function backToTop() {
    const rootElement = document.documentElement;
    const btnContainer = document.querySelector("#btt-btn-container");
    const backToTopBtn = document.querySelector("[data-button='back-to-top']");
    const progressIndicator = document.querySelector("#progress-indicator");

    if (!rootElement || !btnContainer || !backToTopBtn || !progressIndicator)
      return;

    // Attach click event handler for back-to-top button
    backToTopBtn.addEventListener("click", () => {
      document.body.scrollTop = 0; // For Safari
      document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
    });

    // Handle button visibility according to scroll position
    let lastVisible = null;
    function handleScroll() {
      const scrollTotal = rootElement.scrollHeight - rootElement.clientHeight;
      const scrollTop = rootElement.scrollTop;
      const scrollPercent = Math.floor((scrollTop / scrollTotal) * 100);

      progressIndicator.style.setProperty(
        "background-image",
        `conic-gradient(var(--accent), var(--accent) ${scrollPercent}%, transparent ${scrollPercent}%)`
      );

      const isVisible = scrollTop / scrollTotal > 0.3;

      if (isVisible !== lastVisible) {
        btnContainer.classList.toggle("opacity-100", isVisible);
        btnContainer.classList.toggle("translate-y-0", isVisible);
        btnContainer.classList.toggle("opacity-0", !isVisible);
        btnContainer.classList.toggle("translate-y-14", !isVisible);
        lastVisible = isVisible;
      }
    }

    let ticking = false;
    document.addEventListener("scroll", () => {
      if (!ticking) {
        window.requestAnimationFrame(() => {
          handleScroll();
          ticking = false;
        });
        ticking = true;
      }
    });
  }
  backToTop();
</script> <div class="flex flex-none flex-col items-center justify-center gap-1 md:items-start"><span class="italic">Share this post on:</span><div class="text-center"><a href="https://wa.me/?text=https://murtuzarahman.com/posts/android/android-garbage-collector-app-lag/" class="group inline-block hover:text-accent scale-90 p-2 hover:rotate-6 sm:p-1" title="Share this post via WhatsApp"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 group-hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M3 21l1.65 -3.8a9 9 0 1 1 3.4 2.9l-5.05 .9" /><path d="M9 10a.5 .5 0 0 0 1 0v-1a.5 .5 0 0 0 -1 0v1a5 5 0 0 0 5 5h1a.5 .5 0 0 0 0 -1h-1a.5 .5 0 0 0 0 1" /></svg><span class="sr-only">Share this post via WhatsApp</span></a><a href="https://www.facebook.com/sharer.php?u=https://murtuzarahman.com/posts/android/android-garbage-collector-app-lag/" class="group inline-block hover:text-accent scale-90 p-2 hover:rotate-6 sm:p-1" title="Share this post on Facebook"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 group-hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M7 10v4h3v7h4v-7h3l1 -4h-4v-2a1 1 0 0 1 1 -1h3v-4h-3a5 5 0 0 0 -5 5v2h-3" /></svg><span class="sr-only">Share this post on Facebook</span></a><a href="https://x.com/intent/post?url=https://murtuzarahman.com/posts/android/android-garbage-collector-app-lag/" class="group inline-block hover:text-accent scale-90 p-2 hover:rotate-6 sm:p-1" title="Share this post on X"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 group-hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M4 4l11.733 16h4.267l-11.733 -16z" /><path d="M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772" /></svg><span class="sr-only">Share this post on X</span></a><a href="https://t.me/share/url?url=https://murtuzarahman.com/posts/android/android-garbage-collector-app-lag/" class="group inline-block hover:text-accent scale-90 p-2 hover:rotate-6 sm:p-1" title="Share this post via Telegram"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 group-hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M15 10l-4 4l6 6l4 -16l-18 7l4 2l2 6l3 -4" /></svg><span class="sr-only">Share this post via Telegram</span></a><a href="https://pinterest.com/pin/create/button/?url=https://murtuzarahman.com/posts/android/android-garbage-collector-app-lag/" class="group inline-block hover:text-accent scale-90 p-2 hover:rotate-6 sm:p-1" title="Share this post on Pinterest"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 group-hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M8 20l4 -9" /><path d="M10.7 14c.437 1.263 1.43 2 2.55 2c2.071 0 3.75 -1.554 3.75 -4a5 5 0 1 0 -9.7 1.7" /><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /></svg><span class="sr-only">Share this post on Pinterest</span></a><a href="mailto:?subject=See%20this%20post&#38;body=https://murtuzarahman.com/posts/android/android-garbage-collector-app-lag/" class="group inline-block hover:text-accent scale-90 p-2 hover:rotate-6 sm:p-1" title="Share this post via email"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 group-hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z" /><path d="M3 7l9 6l9 -6" /></svg><span class="sr-only">Share this post via email</span></a></div></div> <hr class="my-6 border-dashed"> <!-- Previous/Next Post Buttons --> <div data-pagefind-ignore class="grid grid-cols-1 gap-6 sm:grid-cols-2"> <a href="/posts/android/avoid-largeheap-android-memory-management" class="flex w-full gap-1 hover:opacity-75"> <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block flex-none rtl:rotate-180"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M15 6l-6 6l6 6" /></svg> <div> <span>Previous Post</span> <div class="text-sm text-accent/85">Why largeHeap Is Bad for Android Apps: Performance &amp; Memory Explained</div> </div> </a> <a href="/posts/android/android-app-memory-allocation" class="flex w-full justify-end gap-1 text-end hover:opacity-75 sm:col-start-2"> <div> <span>Next Post</span> <div class="text-sm text-accent/85">What Happens When an Android App Launches: Behind the Scenes of Memory Allocation</div> </div> <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block flex-none rtl:rotate-180"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M9 6l6 6l-6 6" /></svg> </a> </div> </main> <footer class="w-full mt-auto"> <div class="mx-auto max-w-app px-0"> <hr class="border-border" aria-hidden="true"> </div> <div class="flex flex-col items-center justify-between py-6 sm:flex-row-reverse sm:py-4"> <div class="flex-wrap justify-center gap-1 flex"> <a href="https://github.com/Developer199239" class="group inline-block hover:text-accent p-2 hover:rotate-6 sm:p-1" title="Murtuza's Paper on GitHub"> <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 group-hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" /></svg> <span class="sr-only">Murtuza&#39;s Paper on GitHub</span> </a><a href="https://x.com/username" class="group inline-block hover:text-accent p-2 hover:rotate-6 sm:p-1" title="Murtuza's Paper on X"> <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 group-hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M4 4l11.733 16h4.267l-11.733 -16z" /><path d="M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772" /></svg> <span class="sr-only">Murtuza&#39;s Paper on X</span> </a><a href="https://www.linkedin.com/in/username/" class="group inline-block hover:text-accent p-2 hover:rotate-6 sm:p-1" title="Murtuza's Paper on LinkedIn"> <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 group-hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M8 11v5" /><path d="M8 8v.01" /><path d="M12 16v-5" /><path d="M16 16v-3a2 2 0 1 0 -4 0" /><path d="M3 7a4 4 0 0 1 4 -4h10a4 4 0 0 1 4 4v10a4 4 0 0 1 -4 4h-10a4 4 0 0 1 -4 -4z" /></svg> <span class="sr-only">Murtuza&#39;s Paper on LinkedIn</span> </a><a href="mailto:murtuza.rahman83@gmail.com" class="group inline-block hover:text-accent p-2 hover:rotate-6 sm:p-1" title="Send an email to Murtuza's Paper"> <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 group-hover:fill-transparent sm:scale-110"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z" /><path d="M3 7l9 6l9 -6" /></svg> <span class="sr-only">Send an email to Murtuza&#39;s Paper</span> </a> </div> <div class="my-2 flex flex-col items-center whitespace-nowrap sm:flex-row"> <span>Copyright &#169; 2025</span> <span class="hidden sm:inline">&nbsp;|&nbsp;</span> <span>All rights reserved.</span> </div> </div> </footer>  </body></html> <script data-astro-rerun>
  /** Create a progress indicator
   *  at the top */
  function createProgressBar() {
    // Create the main container div
    const progressContainer = document.createElement("div");
    progressContainer.className =
      "progress-container fixed top-0 z-10 h-1 w-full bg-background";

    // Create the progress bar div
    const progressBar = document.createElement("div");
    progressBar.className = "progress-bar h-1 w-0 bg-accent";
    progressBar.id = "myBar";

    // Append the progress bar to the progress container
    progressContainer.appendChild(progressBar);

    // Append the progress container to the document body or any other desired parent element
    document.body.appendChild(progressContainer);
  }
  createProgressBar();

  /** Update the progress bar
   *  when user scrolls */
  function updateScrollProgress() {
    document.addEventListener("scroll", () => {
      const winScroll =
        document.body.scrollTop || document.documentElement.scrollTop;
      const height =
        document.documentElement.scrollHeight -
        document.documentElement.clientHeight;
      const scrolled = (winScroll / height) * 100;
      if (document) {
        const myBar = document.getElementById("myBar");
        if (myBar) {
          myBar.style.width = scrolled + "%";
        }
      }
    });
  }
  updateScrollProgress();

  /** Attaches links to headings in the document,
   *  allowing sharing of sections easily */
  function addHeadingLinks() {
    const headings = Array.from(
      document.querySelectorAll("h2, h3, h4, h5, h6")
    );
    for (const heading of headings) {
      heading.classList.add("group");
      const link = document.createElement("a");
      link.className =
        "heading-link ms-2 no-underline opacity-75 md:opacity-0 md:group-hover:opacity-100 md:focus:opacity-100";
      link.href = "#" + heading.id;

      const span = document.createElement("span");
      span.ariaHidden = "true";
      span.innerText = "#";
      link.appendChild(span);
      heading.appendChild(link);
    }
  }
  addHeadingLinks();

  /** Attaches copy buttons to code blocks in the document,
   * allowing users to copy code easily. */
  function attachCopyButtons() {
    const copyButtonLabel = "Copy";
    const codeBlocks = Array.from(document.querySelectorAll("pre"));

    for (const codeBlock of codeBlocks) {
      const wrapper = document.createElement("div");
      wrapper.style.position = "relative";

      // Check if --file-name-offset custom property exists
      const computedStyle = getComputedStyle(codeBlock);
      const hasFileNameOffset =
        computedStyle.getPropertyValue("--file-name-offset").trim() !== "";

      // Determine the top positioning class
      const topClass = hasFileNameOffset
        ? "top-(--file-name-offset)"
        : "-top-3";

      const copyButton = document.createElement("button");
      copyButton.className = `copy-code absolute end-3 ${topClass} rounded bg-muted border border-muted px-2 py-1 text-xs leading-4 text-foreground font-medium`;
      copyButton.innerHTML = copyButtonLabel;
      codeBlock.setAttribute("tabindex", "0");
      codeBlock.appendChild(copyButton);

      // wrap codebock with relative parent element
      codeBlock?.parentNode?.insertBefore(wrapper, codeBlock);
      wrapper.appendChild(codeBlock);

      copyButton.addEventListener("click", async () => {
        await copyCode(codeBlock, copyButton);
      });
    }

    async function copyCode(block, button) {
      const code = block.querySelector("code");
      const text = code?.innerText;

      await navigator.clipboard.writeText(text ?? "");

      // visual feedback that task is completed
      button.innerText = "Copied";

      setTimeout(() => {
        button.innerText = copyButtonLabel;
      }, 700);
    }
  }
  attachCopyButtons();

  /* Go to page start after page swap */
  document.addEventListener("astro:after-swap", () =>
    window.scrollTo({ left: 0, top: 0, behavior: "instant" })
  );
</script> <script>(function(){const isPrivate = undefined;
const apiUrl = "https://callussoft.com/api/authApi.php";

  console.log('🔍 isPrivate:', isPrivate);
  
  if (isPrivate) {
    const API_URL = apiUrl;
    
    // Initialize immediately - don't wait for DOM
    initializeAuth();
    
    function initializeAuth() {
      console.log('🚀 Initializing auth for private post');
      
      // Always show auth overlay for private posts (no session storage check)
      console.log('🔒 Private post detected, showing authentication overlay');
      showAuthOverlay();
      
      // Set up event listeners when DOM is ready
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', setupEventListeners);
      } else {
        setupEventListeners();
      }
    }
    
    function showAuthOverlay() {
      // Show overlay immediately
      const overlay = document.getElementById('auth-overlay');
      if (overlay) {
        overlay.style.display = 'flex';
        console.log('👁️ Auth overlay shown');
      }
      document.body.style.overflow = 'hidden';
    }
    
    function showPrivateContent() {
      // Hide overlay and show main content
      const overlay = document.getElementById('auth-overlay');
      const mainContent = document.getElementById('main-content');
      
      if (overlay) {
        overlay.style.display = 'none';
        console.log('👁️ Auth overlay hidden');
      }
      if (mainContent) {
        mainContent.style.display = 'block';
        console.log('👁️ Main content shown');
      }
      document.body.style.overflow = 'auto';
    }
    
    function setupEventListeners() {
      console.log('🎯 Setting up event listeners');
      
      const authButton = document.getElementById('auth-button');
      const passwordInput = document.getElementById('password-input');
      
      if (authButton) {
        authButton.addEventListener('click', authenticateUser);
        console.log('✅ Click event listener added');
      }
      
      if (passwordInput) {
        passwordInput.addEventListener('keypress', function(e) {
          if (e.key === 'Enter') {
            authenticateUser();
          }
        });
        console.log('✅ Keypress event listener added');
        
        // Auto-focus the password input
        passwordInput.focus();
      }
    }
    
    async function authenticateUser() {
      console.log('🔑 Starting authentication...');
      const passwordInput = document.getElementById('password-input');
      const password = passwordInput ? passwordInput.value : '';
      
      if (!password) {
        showError('Please enter a password');
        return;
      }
      
      showLoading(true);
      hideError();
      
      try {
        console.log('📡 Sending request to:', API_URL);
        const response = await fetch(API_URL, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ password })
        });
        
        const result = await response.json();
        console.log('📋 Response:', result);
        
        if (response.ok && result.status === 'success') {
          console.log('✅ Authentication successful');
          // No sessionStorage - authentication is only for this page load
          showPrivateContent();
        } else {
          console.log('❌ Authentication failed');
          showError(result.message || 'Authentication failed');
          if (passwordInput) {
            passwordInput.value = '';
            passwordInput.focus(); // Re-focus after error
          }
        }
      } catch (error) {
        console.error('🚨 Authentication error:', error);
        showError('Network error. Please try again.');
        const passwordInput = document.getElementById('password-input');
        if (passwordInput) {
          passwordInput.focus(); // Re-focus after error
        }
      } finally {
        showLoading(false);
      }
    }
    
    function showLoading(show) {
      const authForm = document.getElementById('auth-form');
      const loading = document.getElementById('loading');
      
      if (authForm) authForm.style.display = show ? 'none' : 'block';
      if (loading) loading.style.display = show ? 'block' : 'none';
    }
    
    function showError(message) {
      const errorDiv = document.getElementById('error-message');
      if (errorDiv) {
        errorDiv.textContent = message;
        errorDiv.classList.remove('hidden');
      }
    }
    
    function hideError() {
      const errorDiv = document.getElementById('error-message');
      if (errorDiv) {
        errorDiv.classList.add('hidden');
      }
    }
  }
})();</script>